<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mes Playlists - MuSE</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.14.2/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.14.2/jquery-ui.js"></script>
    <script src="script.js"></script>
    <script src="playlists.js"></script>
    <script src="audio-player.js"></script>
    <script src="header-ui.js" defer></script>
    <script>
        $(document).ready(function() {
            const userId = localStorage.getItem("userId");
            const userName = localStorage.getItem("userName");
            if (userId) {
                console.log("Utilisateur connecté avec l'ID :", userId);
                $('#bienvenue-msg').text(`Bonjour ${userName} !`);
            } else {
                window.location.href = "connexion.html";
            }
        });
    </script>
</head>
<body class="playlists-page">
    <header>
        <a href="accueil.html"><h2>MuSE</h2></a> 
        <nav>
            <a href="accueil.html">Accueil</a>
            <a href="playlists.html">Playlists</a>
            <a href="preferences.html">Préférences</a>
                
            <div class="dropdown">
                <a href="#">API ▾</a>
                <div class="dropdown-content">
                    <a href="api-installation.html">Installation</a>
                    <a href="api-documentation.html">Documentation</a>
                    <a href="api-test.html">Testez l'API</a>
                </div>
            </div>
        </nav>

        <div class="header-right">
            <div id="auth-buttons" class="connexion-inscription">
                <a href="connexion.html?mode=login">Connexion</a>
                <button>
                    <a href="connexion.html?mode=register">Inscription</a>
                </button>
            </div>

            <div id="user-menu" class="user-dropdown hidden">
                <a href="#" id="user-name-display">Mon Profil ▾</a>
                <div class="dropdown-content user-dropdown-content">
                    <a href="profil.html">Mon profil</a>
                    <a href="#" id="logoutBtn" class="logout-link">Déconnexion</a>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="page-header">
            <h1>Mes Playlists</h1>
            <p>Créez et gérez vos playlists personnalisées</p>
        </div>

        <section class="my-playlists-section">
            <div class="playlists-container"></div>
        </section>

         <div class="page-header">
            <h1>Un peu de nouveauté ?</h1>
            <p>Laissez nous vous surprendre avec des playlists générées rien que pour vous</p>
        </div>

        <section class="generated-playlists-section">
            <div class="generated-header">
                <button id="generate-playlist-btn">Générer une playlist</button>
            </div>
            <div class="generated-playlists-container"></div>
        </section>
    </main>

    <div id="create-playlist-modal" class="create-modal-overlay" style="display:none;">
        <div class="create-modal-content">
            <button class="create-modal-close" id="close-create-modal">&times;</button>
            
            <div class="create-modal-header">
                <h2>Nouvelle Playlist</h2>
                <p>Donnez vie à votre sélection musicale</p>
            </div>

            <div class="playlist-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="playlist-name-input">Nom de la playlist <span class="required">*</span></label>
                        <input type="text" id="playlist-name-input" placeholder="Ex: Mes favoris 2026">
                    </div>
                    <div class="form-group">
                        <label for="playlist-description-input">Description</label>
                        <input type="text" id="playlist-description-input" placeholder="Description de la playlist">
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="track-search-input">Rechercher des musiques à ajouter</label>
                    <p>Commencez à taper pour rechercher (minimum 2 caractères)</p>
                    <input type="text" id="track-search-input" placeholder="Rechercher par titre, artiste ou album...">
                </div>
                
                <div class="selected-tracks-section">
                    <h3>Musiques sélectionnées <span id="selected-count">(0)</span></h3>
                    <div id="selected-tracks-container">
                        <p class="no-selection">Aucune musique sélectionnée</p>
                    </div>
                </div>
                
                <button id="create-playlist-button">Créer la playlist</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="titre-footer">
            <h2>MuSE</h2>
        </div>
        <div class="navigation-footer">
            <div>
                <p>Société</p>
                <div>
                    <a href="#">À propos de nous</a>
                    <a href="#">Offre d'emploi</a>
                </div>
            </div>
            <div>
                <p>Liens utiles</p>
                <div>
                    <a href="contact.html">Nous contacter</a>
                </div>
            </div>
            <div>
                <p>Communauté</p>
                <div>
                    <a href="#">Développeurs</a>
                </div>
            </div>
            <div>
                <p>Légal</p>
                <div>
                    <a href="#">Mentions légales</a>
                </div>
            </div>
        </div>
        <div class="barre-separation-footer"></div>
        <div class="fin-footer">
            <div class="reseaux-sociaux-footer">
                <a href="#"><img src="../images/icones/instagram.avif" alt="Instagram"/></a>
                <a href="#"><img src="../images/icones/linkedin.avif" alt="LinkedIn"/></a>
                <a href="#"><img src="../images/icones/github.avif" alt="GitHub"/></a>
                <a href="#"><img src="../images/icones/facebook.avif" alt="Facebook"/></a>
            </div>
            <p>© 2026 MuSE Français</p>
        </div>
    </footer>
</body>
</html>